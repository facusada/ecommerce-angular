<a routerLink="/" class="back-link">‚Üê Volver al listado</a>

<ng-container *ngIf="product$ | async as product; else notFound">
  <article class="detail-card">
    <img [src]="product.image" [alt]="product.name" loading="lazy" />
    <div class="detail-content">
      <h1>{{ product.name }}</h1>
      <p class="category">{{ product.category }}</p>
      <p class="description">{{ product.description }}</p>
      <p class="price">{{ product.price | currency:'USD' }}</p>

      <div class="purchase-actions">
        <div class="quantity-control" role="group" aria-label="Selector de cantidad">
          <button type="button" (click)="decreaseQuantity()" aria-label="Reducir cantidad">-</button>
          <span class="quantity">{{ quantity }}</span>
          <button type="button" (click)="increaseQuantity()" aria-label="Aumentar cantidad">+</button>
        </div>
        <button type="button" class="btn-cart" (click)="addToCart(product)">Agregar al carrito</button>
      </div>

      <section>
        <h2>Caracteristicas principales</h2>
        <ng-container *ngIf="product.features?.length; else noFeatures">
          <ul>
            <li *ngFor="let feature of product.features">{{ feature }}</li>
          </ul>
        </ng-container>
        <ng-template #noFeatures>
          <p class="no-features">No tenemos detalles adicionales para este producto por ahora.</p>
        </ng-template>
      </section>

      <a routerLink="/contact" class="btn-primary">Consultar disponibilidad</a>
    </div>
  </article>
</ng-container>

<ng-template #notFound>
  <div class="empty-state">
    <h2>Producto no encontrado</h2>
    <p>No pudimos encontrar el articulo que estabas buscando.</p>
    <a routerLink="/" class="btn-secondary">Volver al inicio</a>
  </div>
</ng-template>
